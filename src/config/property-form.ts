// ============================================
// FIELDS THAT ARE AUTO-POPULATED (NOT IN FORM)
// ============================================
// These fields are automatically set from the authenticated user
// and should NOT be included in the create/edit forms:

export const AUTO_POPULATED_FIELDS = [
  "ownerId", // From auth user ID
  "ownerEmail", // From auth user email
  "ownerPhone", // From auth user phone
  "ownerName", // From auth user firstName + lastName
  "postedBy", // From auth user.userType
  "advertiserName", // From auth user.companyName or name
  "advertiserReraNumber", // From auth user.reraNumber
  "advertiserGstNumber", // From auth user.gstNumber
  "postedDate", // Auto-generated timestamp
  "submittedAt", // Auto-generated timestamp
  "createdAt", // Auto-generated by Prisma
  "updatedAt", // Auto-generated by Prisma
  "slug", // Auto-generated from title
  // "pricePerUnit", // Auto-calculated: price / carpetArea
  "viewCount", // Auto-initialized to 0
  "inquiryCount", // Auto-initialized to 0
  "shareCount", // Auto-initialized to 0
];

// Property Type Field Mapping Configuration
// Use this to dynamically show/hide fields based on property type and subtype
const RESIDENTIAL_LIKE_FIELDS = [
  "bedrooms",
  "bathrooms",
  "carpetArea",
  "carpetAreaUnit",
  "builtUpArea",
  "builtUpAreaUnit",
  "superBuiltArea",
  "superBuiltAreaUnit",
  "floorNumber",
  "totalFloors",
  "furnishingStatus",
  "possessionStatus",
  "possessionDate",
  "coveredParking",
  "openParking",
  "amenities",
  "nearbyPlaces",
  "yearBuilt",
  "images",
  "documents",
  "youtubeVideoUrl",
  "virtualTourUrl",
];

export const PROPERTY_FIELD_CONFIG = {
  RESIDENTIAL: {
    common: [
      "title",
      "description",
      "purpose",
      "price",
      "priceNegotiable",
      "stampDutyExcluded",
      "currency",
      "address",
      "complexName",
      "cityId",
      "locality",
      "state",
      "country",
      "zipCode",
    ],
    APARTMENT: [
      "bedrooms",
      "bathrooms",
      "balconies",
      "hasBalcony",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "serviceLifts",
      "totalFlats",
      "totalBuildings",
      "maintenanceCharges",
      "securityDeposit",
      "yearBuilt",
      "facingDirection",
      "amenities",
      "nearbyPlaces",
      "images",
      "documents",
      "youtubeVideoUrl",
      "virtualTourUrl",
    ],
    FLAT: [
      // Same as APARTMENT
      "bedrooms",
      "bathrooms",
      "balconies",
      "hasBalcony",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "serviceLifts",
      "totalFlats",
      "totalBuildings",
      "maintenanceCharges",
      "securityDeposit",
      "yearBuilt",
      "facingDirection",
      "amenities",
      "nearbyPlaces",
    ],
    VILLA: [
      "bedrooms",
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "plotArea",
      "plotAreaUnit",
      "floors", // Number of floors in the villa itself
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "yearBuilt",
      "facingDirection",
      "boundaryWall",
      "cornerPlot",
      "amenities",
      "nearbyPlaces",
    ],
    HOUSE: [
      // Similar to VILLA
      "bedrooms",
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "plotArea",
      "plotAreaUnit",
      "floors",
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "yearBuilt",
      "facingDirection",
      "amenities",
      "nearbyPlaces",
    ],
    STUDIO: [
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "maintenanceCharges",
      "amenities",
      "nearbyPlaces",
    ],
    PENTHOUSE: [
      "bedrooms",
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "totalFloors", // Usually top floor
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "serviceLifts",
      "maintenanceCharges",
      "securityDeposit",
      "amenities",
      "nearbyPlaces",
    ],
    DUPLEX: [
      "bedrooms",
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "floors", // 2 floors in duplex
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "maintenanceCharges",
      "securityDeposit",
      "amenities",
      "nearbyPlaces",
    ],
    TOWNHOUSE: [
      "bedrooms",
      "bathrooms",
      "balconies",
      "carpetArea",
      "carpetAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "plotArea",
      "plotAreaUnit",
      "floors",
      "furnishingStatus",
      "possessionStatus",
      "possessionDate",
      "coveredParking",
      "openParking",
      "yearBuilt",
      "amenities",
      "nearbyPlaces",
    ],
  },

  COMMERCIAL: {
    common: [
      "title",
      "description",
      "purpose",
      "price",
      "priceNegotiable",
      "stampDutyExcluded",
      "pricePerUnit",
      "currency",
      "availabilityStatus",
      "availabilityType",
      "monthlyRent",
      "leasePeriod",
      "address",
      "cityId",
      "locality",
      "state",
      "country",
      "zipCode",
    ],
    HOTEL: [
      ...RESIDENTIAL_LIKE_FIELDS,
      "receptionArea",
      "maintenanceCharges",
      "securityDeposit",
    ],
    GUEST_HOUSE: [
      ...RESIDENTIAL_LIKE_FIELDS,
      "maintenanceCharges",
      "securityDeposit",
    ],
    OFFICE: [
      "projectName",
      "locatedWithin",
      "officeType",
      "carpetArea",
      "carpetAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "builtUpArea",
      "builtUpAreaUnit",
      "floorNumber",
      "totalFloors",
      "officesPerFloor",
      "officesInProject",
      "buildingsInProject",
      "cabins",
      "yearBuilt",
      "seats",
      "privateWashrooms",
      "publicWashrooms",
      "conferenceRooms",
      "receptionArea",
      "meetingRooms",
      "pantryType",
      "furnishingStatus",
      "coveredParking",
      "openParking",
      "passengerLifts",
      "serviceLifts",
      "preRented",
      "nocCertified",
      "occupancyCertified",
      "developerName",
      "projectReraNumber",
      "maintenanceCharges",
      "securityDeposit",
      "possessionStatus",
      "possessionDate",
      "amenities",
      "nearbyPlaces",
      "images",
      "documents",
      "virtualTourUrl",
    ],
    SHOP: [
      "carpetArea",
      "carpetAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "furnishingStatus",
      "coveredParking",
      "openParking",
      "maintenanceCharges",
      "securityDeposit",
      "possessionStatus",
      "possessionDate",
      "facingDirection", // Shop facing
      "amenities",
      "nearbyPlaces",
    ],
    SHOWROOM: [
      "carpetArea",
      "carpetAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "floorNumber",
      "totalFloors",
      "ceilingHeight",
      "coveredParking",
      "openParking",
      "publicParking",
      "furnishingStatus",
      "maintenanceCharges",
      "securityDeposit",
      "possessionStatus",
      "possessionDate",
      "amenities",
      "nearbyPlaces",
    ],
    WAREHOUSE: [
      "carpetArea",
      "carpetAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "coveredArea",
      "openArea",
      "ceilingHeight",
      "loadingDocks",
      "powerLoad",
      "flooringType",
      "coveredParking",
      "openParking",
      "roadWidth",
      "facingDirection",
      "securityDeposit",
      "possessionStatus",
      "possessionDate",
      "amenities",
    ],
    INDUSTRIAL: [
      "carpetArea",
      "carpetAreaUnit",
      "superBuiltArea",
      "superBuiltAreaUnit",
      "coveredArea",
      "openArea",
      "ceilingHeight",
      "loadingDocks",
      "powerLoad",
      "flooringType",
      "zoningType",
      "coveredParking",
      "openParking",
      "roadWidth",
      "electricityAvailable",
      "waterConnection",
      "sewageConnection",
      "securityDeposit",
      "possessionStatus",
      "possessionDate",
    ],
  },

  LAND: {
    common: [
      "title",
      "description",
      "purpose",
      "price",
      "priceNegotiable",
      "stampDutyExcluded",
      "pricePerUnit",
      "currency",
      "address",
      "cityId",
      "locality",
      "state",
      "country",
      "zipCode",
    ],
    RESIDENTIAL_PLOT: [
      "plotArea",
      "plotAreaUnit",
      "plotDimensions",
      "boundaryWall",
      "cornerPlot",
      "facingDirection",
      "zoningType",
      "clearTitle",
      "developmentStatus",
      "roadWidth",
      "electricityAvailable",
      "waterConnection",
      "sewageConnection",
      "possessionStatus",
      "possessionDate",
      "nearbyPlaces",
      "images",
      "documents",
    ],
    COMMERCIAL_PLOT: [
      "plotArea",
      "plotAreaUnit",
      "plotDimensions",
      "boundaryWall",
      "cornerPlot",
      "facingDirection",
      "zoningType",
      "clearTitle",
      "developmentStatus",
      "roadWidth",
      "electricityAvailable",
      "waterConnection",
      "sewageConnection",
      "possessionStatus",
      "possessionDate",
      "nearbyPlaces",
    ],
    AGRICULTURAL: [
      "plotArea",
      "plotAreaUnit",
      "plotDimensions",
      "boundaryWall",
      "zoningType",
      "clearTitle",
      "roadWidth",
      "electricityAvailable",
      "waterConnection",
      "possessionStatus",
      "possessionDate",
      "nearbyPlaces",
    ],
    INDUSTRIAL_LAND: [
      "plotArea",
      "plotAreaUnit",
      "plotDimensions",
      "boundaryWall",
      "cornerPlot",
      "facingDirection",
      "zoningType",
      "clearTitle",
      "developmentStatus",
      "roadWidth",
      "electricityAvailable",
      "waterConnection",
      "sewageConnection",
      "powerLoad",
      "possessionStatus",
      "possessionDate",
    ],
  },
};

// Helper function to get all fields for a property type/subtype
export function getRequiredFields(
  propertyType: string,
  subType?: string
): string[] {
  const typeConfig =
    PROPERTY_FIELD_CONFIG[propertyType as keyof typeof PROPERTY_FIELD_CONFIG];

  if (!typeConfig) return [];

  const commonFields = typeConfig.common || [];
  const subTypeFields =
    subType && typeConfig[subType as keyof typeof typeConfig]
      ? (typeConfig[subType as keyof typeof typeConfig] as string[])
      : [];

  return [...commonFields, ...subTypeFields];
}
export interface FieldMetadata {
  label: string;
  type: string;
  required?: boolean;
  placeholder?: string;
  min?: number;
  options?: string[];
  units?: string[];
  accept?: string;
  multiple?: boolean;
}

export const FIELD_METADATA: Record<string, FieldMetadata> = {
  // Text inputs
  title: { label: "Property Title", type: "text", required: true },
  description: { label: "Description", type: "textarea", required: true },
  address: { label: "Address", type: "text", required: true },
  complexName: { label: "Complex/Society Name", type: "text" },
  locality: { label: "Locality", type: "text", required: true },
  projectName: { label: "Project Name", type: "text" },
  developerName: { label: "Developer Name", type: "text" },
  projectReraNumber: { label: "Project RERA Number", type: "text" },
  builderName: { label: "Builder/Developer Name", type: "text" },
  reraNumber: { label: "RERA Registration Number", type: "text" },
  plotDimensions: { label: "Plot Dimensions", type: "text" },
  roadWidth: { label: "Road Width", type: "text" },
  powerLoad: { label: "Power Load", type: "text" },
  ceilingHeight: { label: "Ceiling Height", type: "text" },
  leasePeriod: { label: "Lease Period", type: "text" },

  // Numbers
  price: { label: "Price", type: "number", required: true },
  pricePerUnit: { label: "Price per Unit", type: "number", required: true },
  bedrooms: { label: "Bedrooms", type: "number", min: 0 },
  bathrooms: { label: "Bathrooms", type: "number", min: 0 },
  balconies: { label: "Balconies", type: "number", min: 0 },
  floors: { label: "Floors", type: "number", min: 0 },
  floorNumber: { label: "Floor Number", type: "number", min: 0 },
  totalFloors: { label: "Total Floors", type: "number", min: 0 },
  totalFlats: { label: "Total Flats", type: "number", min: 0 },
  totalBuildings: { label: "Total Buildings", type: "number", min: 0 },
  yearBuilt: { label: "Year Built", type: "number", min: 1800 },
  officesPerFloor: { label: "Offices Per Floor", type: "number", min: 0 },
  officesInProject: {
    label: "Total Offices in Project",
    type: "number",
    min: 0,
  },
  buildingsInProject: { label: "Buildings in Project", type: "number", min: 0 },
  cabins: { label: "Number of Cabins", type: "number", min: 0 },
  seats: { label: "Number of Seats", type: "number", min: 0 },
  privateWashrooms: { label: "Private Washrooms", type: "number", min: 0 },
  publicWashrooms: { label: "Public Washrooms", type: "number", min: 0 },
  meetingRooms: { label: "Meeting Rooms", type: "number", min: 0 },
  loadingDocks: { label: "Loading Docks", type: "number", min: 0 },
  coveredParking: { label: "Covered Parking", type: "number", min: 0 },
  openParking: { label: "Open Parking", type: "number", min: 0 },
  publicParking: { label: "Public Parking", type: "number", min: 0 },
  passengerLifts: { label: "Passenger Lifts", type: "number", min: 0 },
  serviceLifts: { label: "Service Lifts", type: "number", min: 0 },
  maintenanceCharges: { label: "Maintenance Charges", type: "number", min: 0 },
  securityDeposit: { label: "Security Deposit", type: "number", min: 0 },
  monthlyRent: { label: "Monthly Rent", type: "number", min: 0 },
  squareFeet: { label: "Square Feet", type: "number", min: 0 },
  squareMeters: { label: "Square Meters", type: "number", min: 0 },

  // Area with units - THESE WILL AUTO-HANDLE UNITS
  carpetArea: {
    label: "Carpet Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "sqyd"],
  },
  builtUpArea: {
    label: "Built-up Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "sqyd"],
  },
  superBuiltArea: {
    label: "Super Built-up Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "sqyd"],
  },
  plotArea: {
    label: "Plot Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "acres", "hectares"],
  },
  coveredArea: {
    label: "Covered Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "sqyd"],
  },
  openArea: {
    label: "Open Area",
    type: "number-with-unit",
    units: ["sqft", "sqm", "sqyd"],
  },

  // Dropdowns
  purpose: {
    label: "Purpose",
    type: "select",
    options: ["SALE", "RENT", "LEASE"],
    required: true,
  },
  furnishingStatus: {
    label: "Furnishing",
    type: "select",
    options: ["Furnished", "Semi-Furnished", "Unfurnished"],
  },
  possessionStatus: {
    label: "Possession Status",
    type: "select",
    options: ["Ready to Move", "Under Construction", "Future"],
  },
  availabilityStatus: {
    label: "Availability",
    type: "select",
    options: ["Available", "Rented", "Sold", "Leased"],
  },
  availabilityType: {
    label: "Availability Type",
    type: "select",
    options: ["For Rent", "For Sale", "For Lease"],
  },
  officeType: {
    label: "Office Type",
    type: "select",
    options: [
      "IT Office",
      "Corporate Office",
      "CA Office",
      "Educational Office",
      "Frontend Office",
      "Back Office",
      "Small Office",
      "Traders Office",
      "Advocate Office",
      "Others",
    ],
  },
  locatedWithin: {
    label: "Located Within",
    type: "select",
    options: ["Business Park", "IT Park", "Standalone", "Others"],
  },
  pantryType: {
    label: "Pantry Type",
    type: "select",
    options: ["Wet Pantry", "Dry Pantry", "None"],
  },
  facingDirection: {
    label: "Facing",
    type: "select",
    options: [
      "North",
      "South",
      "East",
      "West",
      "North-East",
      "North-West",
      "South-East",
      "South-West",
    ],
  },
  zoningType: {
    label: "Zoning",
    type: "select",
    options: [
      "Residential",
      "Commercial",
      "Industrial",
      "Agricultural",
      "Mixed Use",
    ],
  },
  developmentStatus: {
    label: "Development Status",
    type: "select",
    options: ["Approved", "Non-Approved", "Under Development", "Completed"],
  },
  flooringType: {
    label: "Flooring Type",
    type: "select",
    options: ["Concrete", "Epoxy", "Wood", "Tile", "Other"],
  },
  currency: {
    label: "Currency",
    type: "select",
    options: [
      "USD",
      "EUR",
      "GBP",
      "KES",
      "INR",
      "AED",
      "SAR",
      "AUD",
      "CAD",
      "JPY",
      "ZAR",
    ],
  },

  // Booleans/Checkboxes
  priceNegotiable: { label: "Price Negotiable", type: "checkbox" },
  stampDutyExcluded: { label: "Stamp Duty Excluded", type: "checkbox" },
  hasBalcony: { label: "Has Balcony", type: "checkbox" },
  boundaryWall: { label: "Boundary Wall", type: "checkbox" },
  cornerPlot: { label: "Corner Plot", type: "checkbox" },
  clearTitle: { label: "Clear Title", type: "checkbox" },
  electricityAvailable: { label: "Electricity Available", type: "checkbox" },
  waterConnection: { label: "Water Connection", type: "checkbox" },
  sewageConnection: { label: "Sewage Connection", type: "checkbox" },
  conferenceRooms: { label: "Conference Rooms", type: "checkbox" },
  receptionArea: { label: "Reception Area", type: "checkbox" },
  preRented: { label: "Pre-Rented", type: "checkbox" },
  nocCertified: { label: "NOC Certified", type: "checkbox" },
  occupancyCertified: { label: "Occupancy Certificate", type: "checkbox" },

  // Date

  possessionDate: { label: "Possession Date", type: "date" },

  // URLs
  youtubeVideoUrl: { label: "YouTube Video URL", type: "text" },
  virtualTourUrl: { label: "Virtual Tour URL", type: "text" },

  // Special fields
  nearbyPlaces: { label: "Nearby Places", type: "multi-tag" },
  amenities: { label: "Amenities", type: "multi-select" },
  images: {
    label: "Property Images",
    type: "file-upload",
    accept: "image/*",
    multiple: true,
  },
  documents: {
    label: "Property Documents",
    type: "file-upload",
    accept: ".pdf,.doc,.docx",
    multiple: true,
  },
};
// Conditional logic helpers
export const CONDITIONAL_FIELDS = {
  // Show possession date only if possession status is "Under Construction"
  possessionDate: {
    dependsOn: "possessionStatus",
    showWhen: (value: string) => value === "Under Construction",
  },

  // Show rental fields only if availability type is "For Rent"
  monthlyRent: {
    dependsOn: "availabilityType",
    showWhen: (value: string) => value === "For Rent",
  },
  leasePeriod: {
    dependsOn: "availabilityType",
    showWhen: (value: string) => value === "For Rent",
  },

  // Show availability type only if availability status is "Available"
  availabilityType: {
    dependsOn: "availabilityStatus",
    showWhen: (value: string) => value === "Available",
  },
};

// Validation rules
export const VALIDATION_RULES = {
  carpetArea: {
    max: (superBuiltArea: number) => superBuiltArea || Infinity,
    message: "Carpet area cannot exceed super built-up area",
  },
  builtUpArea: {
    min: (carpetArea: number) => carpetArea || 0,
    max: (superBuiltArea: number) => superBuiltArea || Infinity,
    message:
      "Built-up area should be between carpet area and super built-up area",
  },
};
